# Maintainer: Hellia <hellia@kelaun.be>

pkgname=fsel-git
pkgver=r43.0e4e4be
pkgrel=1
pkgdesc='Fast TUI app launcher and fuzzy finder for GNU/Linux and BSD'
arch=('any')
url='https://github.com/Mjoyufull/fsel'
license=('custom')
optdepends=('uwsm: for --uwsm flag' 'systemd: for --systemd-run flag' 'cclip: for --cclip mode' 'chafa: for image previews in cclip mode' 'kitty: for inline image support' 'otter-launcher: for a complete launcher setup')
makedepends=('git' 'rust')
provides=('fsel')
source=("${pkgname}::git+${url}")
sha256sums=('SKIP')

pkgver() {
  cd "${srcdir}/${pkgname}"
  echo "r$(git rev-list --count HEAD).$(git rev-parse --short HEAD)"
}

build() {
  cd "${srcdir}/${pkgname}"
  cargo build --release
}

package() {
  cd "${srcdir}/${pkgname}"
  sudo cp "target/release/fsel" "/usr/local/bin"
}
